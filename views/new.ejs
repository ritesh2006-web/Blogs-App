<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>New Post + Ask Khuda</title>
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <header>
    <h1>ğŸ†• Create New Post</h1>
    <a href="/" class="btn">â† Back</a>
  </header>

  <main>
    <!-- New Post Form -->
    <form action="/new" method="post" class="form">
      <input type="text" name="title" placeholder="Title" required>
      <textarea name="content" placeholder="Write your post..." rows="5" required></textarea>
      <button type="submit">Publish</button>
    </form>

    <hr>

    <h2>Stuck? ğŸ’¬ Ask our AI</h2>

    <!-- Ask Form -->
    <form id="askForm" action="/ask" method="post" class="form">
      <textarea name="prompt" placeholder="Ask anything..." rows="4" required></textarea>
      <button type="submit">Ask</button>
    </form>

    <!-- Loading message (initially hidden) -->
    <div id="loadingMsg" style="display: none;" class="card loading">
      <p>Generating response...</p>
    </div>

    <!-- Response from AI -->
    <% if (response) { %>
  <h2>AI Response:</h2>
  <div class="ai-response">
    <%- response %> 
  </div>
<% } %>

  </main>

  <script>
    // Show "Generating response..." when Ask form is submitted
    const askForm = document.getElementById("askForm");
    const loadingMsg = document.getElementById("loadingMsg");

    askForm.addEventListener("submit", () => {
      loadingMsg.style.display = "block";
    });
  </script>
</body>

</html>
